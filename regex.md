# Регулярные выражения

## Решения

### Пароль минимум из 6 символов
(одно число, одна буква и один символ): 

```
/^(?=.*\d)(?=.*[a-z])(?=.*[\W_]).{6,}$/i
```

### Любое число не делящееся на 50

```
/\b(?!\d+[50]0)\d+\b/
```

### Любая строка не содержащая `foo`

```
/^(?!.*foo).+$/
/^(?:(?!foo).)+$/
```

### Текст в кавычках с учётом экранирования

```
# hello "one \"two\" three" world '"two" \'four\' one'

# Только двойные кавычки
/"(?:[^"\\]|\\.)*"/g

# Двойные и одинарные кавычки
/(["'])(?:\\?.)*?\1/g
/(["'])(?:[^\1\\]|\\.)*?\1/g
```

### Слова содержащие кириллические и латинские символы одновременно

```
/[а-яА-ЯёЁa-zA-Z-]+\b[а-яА-ЯёЁa-zA-Z-]+/g
```

### Слова содержащие заглавную букву

```
/\w*[A-Z]\w*/g
```

### Неповторяющийся символ

```
/&++(?<!&&)/
/[^&]&[^&]/
```

### Цифры от 000 до 254

```
^(?:[01]?\d\d?|2[0-4]\d|25[0-4])$
```

### Иконки и графические символы

```
# PCRE
/\p{S}/u

# JavaScript (не очень правильное решение)
/[\u00a9\u00ae\u2000-\u3300]|[\ud83c-\ud83e][\ud000-\udfff]/
```

### Непечатаемые ASCII символы 
```
/[^ -~]/
/[^\x20-\x7E]/
```

## Экранирование внутри класса символов `[]`

Экранировать необходимо только закрывающую квадратную скобку `]`, карет `^`, дефис `-` и сам символ обратной косой черты `\`.

### Неявное экранирование

`-` - дефис можно не экранировать, если поместить его в начале или конце класса символов `[a-z-]`, `[^-]`.

`^` - карет в любом месте, кроме первого `[^^]`.

`]` - закрывающую квадратную скобку лучше экранировать явно `[\]]`, так как одни реализации воспринимают `]` в выражении `[]]` как часть класса, а другие (например JavaScript) как пустой класс символов `[]` с последующим символом `]`.

## Скорость поиска

Относительное быстродействие различных вариантов записи регулярного выражения

```
/[а-яА-ЯёЁ0-9_]+/u  0.53s
/\w+/u              0.74s
/[а-яё0-9_]+/ui     1.18s

/.+/s      0.39s
/[\s\S]+/  0.70s
```

## Глаголы управления бэктрекингом

- `(*SKIP)` - удаляет все состояния и начинает поиск с позиции в которой он размещён
- `(*PRUNE)` - удаляет все состояния и начинает поиск с новой позиции (позиции следующей за начальной)

### Ссылки:
[Backtracking Control Verbs](http://www.rexegg.com/backtracking-control-verbs.html)


## Ссылки

[Best of Fluent 2012: /Reg(exp){2}lained/: Demystifying Regular Expressions](https://www.youtube.com/watch?v=EkluES9Rvak) - видео с конференции
